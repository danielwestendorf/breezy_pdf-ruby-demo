(function(d){var n={tooltip:{show:!1,cssClass:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,snap:!0,lines:!1,clickTips:!1,onHover:function(b,a){},$compat:!1}};n.tooltipOpts=n.tooltip;var e=function(b){this.tipPosition={x:0,y:0};this.init(b)};e.prototype.init=function(b){function a(a){var c={};c.x=a.pageX;c.y=a.pageY;b.setTooltipPosition(c)}function u(a,f,g){c.clickmode?(d(b.getPlaceholder()).bind("plothover",
p),b.hideTooltip(),c.clickmode=!1):(p(a,f,g),c.getDomElement().is(":visible")&&(d(b.getPlaceholder()).unbind("plothover",p),c.clickmode=!0))}function p(a,f,g){var t=function(a,b,c,f){return Math.sqrt((c-a)*(c-a)+(f-b)*(f-b))};if(g)b.showTooltip(g,c.tooltipOptions.snap?g:f);else if(c.plotOptions.series.lines.show&&!0===c.tooltipOptions.lines){a=c.plotOptions.grid.mouseActiveRadius;var u=a+1,e,p=f;d.each(b.getData(),function(a,d){for(var g,k=0,h=-1,l=1;l<d.data.length;l++)d.data[l-1][0]<=f.x&&d.data[l][0]>=
f.x&&(k=l-1,h=l);if(-1===h)b.hideTooltip();else{l=d.data[k][0];var m=d.data[k][1],q=d.data[h][0],r=d.data[h][1];var w=d.xaxis.p2c(f.x);var n=d.yaxis.p2c(f.y),v=d.xaxis.p2c(l),A=d.yaxis.p2c(m),y=d.xaxis.p2c(q),z=d.yaxis.p2c(r);var B=!1;var x=A-z;g=y-v;w=Math.abs(x*w+g*n+(v*z-A*y))/Math.sqrt(x*x+g*g);w<u&&(k=t(l,m,f.x,f.y)<t(f.x,f.y,q,r)?k:h,h=[f.x,m+(f.x-l)/(q-l)*(r-m)],u=w,e={datapoint:h,dataIndex:k,series:d,seriesIndex:a},c.tooltipOptions.snap&&(p={pageX:d.xaxis.p2c(h[0]),pageY:d.yaxis.p2c(h[1])}))}});
u<a+1?b.showTooltip(e,p):b.hideTooltip()}else b.hideTooltip()}var c=this,e=d.plot.plugins.length;this.plotPlugins=[];if(e)for(var m=0;m<e;m++)this.plotPlugins.push(d.plot.plugins[m].name);b.hooks.bindEvents.push(function(b,f){c.plotOptions=b.getOptions();"boolean"===typeof c.plotOptions.tooltip&&(c.plotOptions.tooltipOpts.show=c.plotOptions.tooltip,c.plotOptions.tooltip=c.plotOptions.tooltipOpts,delete c.plotOptions.tooltipOpts);!1!==c.plotOptions.tooltip.show&&"undefined"!==typeof c.plotOptions.tooltip.show&&
(c.tooltipOptions=c.plotOptions.tooltip,c.tooltipOptions.$compat?(c.wfunc="width",c.hfunc="height"):(c.wfunc="innerWidth",c.hfunc="innerHeight"),c.getDomElement(),d(b.getPlaceholder()).bind("plothover",p),c.tooltipOptions.clickTips&&d(b.getPlaceholder()).bind("plotclick",u),c.clickmode=!1,d(f).bind("mousemove",a))});b.hooks.shutdown.push(function(b,c){d(b.getPlaceholder()).unbind("plothover",p);d(b.getPlaceholder()).unbind("plotclick",u);b.removeTooltip();d(c).unbind("mousemove",a)});b.setTooltipPosition=
function(a){var b=c.getDomElement(),g=b.outerWidth()+c.tooltipOptions.shifts.x;b=b.outerHeight()+c.tooltipOptions.shifts.y;a.x-d(window).scrollLeft()>d(window)[c.wfunc]()-g&&(a.x-=g,a.x=Math.max(a.x,0));a.y-d(window).scrollTop()>d(window)[c.hfunc]()-b&&(a.y-=b);isNaN(a.x)?c.tipPosition.x=c.tipPosition.xPrev:(c.tipPosition.x=a.x,c.tipPosition.xPrev=a.x);isNaN(a.y)?c.tipPosition.y=c.tipPosition.yPrev:(c.tipPosition.y=a.y,c.tipPosition.yPrev=a.y)};b.showTooltip=function(a,d,g){d=c.getDomElement();g=
c.stringFormat(c.tooltipOptions.content,a);if(""!==g&&(d.html(g),b.setTooltipPosition({x:c.tipPosition.x,y:c.tipPosition.y}),d.css({left:c.tipPosition.x+c.tooltipOptions.shifts.x,top:c.tipPosition.y+c.tooltipOptions.shifts.y}).show(),"function"===typeof c.tooltipOptions.onHover))c.tooltipOptions.onHover(a,d)};b.hideTooltip=function(){c.getDomElement().hide().html("")};b.removeTooltip=function(){c.getDomElement().remove()}};e.prototype.getDomElement=function(){var b=d("<div>");this.tooltipOptions&&
this.tooltipOptions.cssClass&&(b=d("."+this.tooltipOptions.cssClass),0===b.length&&(b=d("<div />").addClass(this.tooltipOptions.cssClass),b.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&b.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})));return b};e.prototype.stringFormat=function(b,a){var d=/%p\.{0,1}(\d{0,})/,e=/%s/,c=/%c/,n=/%lx/,m=/%ly/,
t=/%x\.{0,1}(\d{0,})/,f=/%y\.{0,1}(\d{0,})/,g,v;if("undefined"!==typeof a.series.threshold){var k=a.datapoint[0];var h=a.datapoint[1];var r=a.datapoint[2]}else"undefined"!==typeof a.series.curvedLines?(k=a.datapoint[0],h=a.datapoint[1]):"undefined"!==typeof a.series.lines&&a.series.lines.steps?(k=a.series.datapoints.points[2*a.dataIndex],h=a.series.datapoints.points[2*a.dataIndex+1],r=""):(k=a.series.data[a.dataIndex][0],h=a.series.data[a.dataIndex][1],r=a.series.data[a.dataIndex][2]);null===a.series.label&&
a.series.originSeries&&(a.series.label=a.series.originSeries.label);"function"===typeof b&&(b=b(a.series.label,k,h,a));if("boolean"===typeof b&&!b)return"";r&&(b=b.replace("%ct",r));"undefined"!==typeof a.series.percent?g=a.series.percent:"undefined"!==typeof a.series.percents&&(g=a.series.percents[a.dataIndex]);"number"===typeof g&&(b=this.adjustValPrecision(d,b,g));a.series.hasOwnProperty("pie")&&"undefined"!==typeof a.series.data[0][1]&&(v=a.series.data[0][1]);"number"===typeof v&&(b=b.replace("%n",
v));b="undefined"!==typeof a.series.label?b.replace(e,a.series.label):b.replace(e,"");b="undefined"!==typeof a.series.color?b.replace(c,a.series.color):b.replace(c,"");b=this.hasAxisLabel("xaxis",a)?b.replace(n,a.series.xaxis.options.axisLabel):b.replace(n,"");b=this.hasAxisLabel("yaxis",a)?b.replace(m,a.series.yaxis.options.axisLabel):b.replace(m,"");this.isTimeMode("xaxis",a)&&this.isXDateFormat(a)&&(b=b.replace(t,this.timestampToDate(k,this.tooltipOptions.xDateFormat,a.series.xaxis.options)));
this.isTimeMode("yaxis",a)&&this.isYDateFormat(a)&&(b=b.replace(f,this.timestampToDate(h,this.tooltipOptions.yDateFormat,a.series.yaxis.options)));"number"===typeof k&&(b=this.adjustValPrecision(t,b,k));"number"===typeof h&&(b=this.adjustValPrecision(f,b,h));if("undefined"!==typeof a.series.xaxis.ticks){d=this.hasRotatedXAxisTicks(a)?"rotatedTicks":"ticks";e=a.dataIndex+a.seriesIndex;for(var B in a.series.xaxis[d])a.series.xaxis[d].hasOwnProperty(e)&&!this.isTimeMode("xaxis",a)&&(this.isCategoriesMode("xaxis",
a)?a.series.xaxis[d][e].label:a.series.xaxis[d][e].v)===k&&(b=b.replace(t,a.series.xaxis[d][e].label.replace(/\$/g,"$$$$")))}if("undefined"!==typeof a.series.yaxis.ticks)for(var q in a.series.yaxis.ticks)a.series.yaxis.ticks.hasOwnProperty(q)&&(this.isCategoriesMode("yaxis",a)?a.series.yaxis.ticks[q].label:a.series.yaxis.ticks[q].v)===h&&(b=b.replace(f,a.series.yaxis.ticks[q].label.replace(/\$/g,"$$$$")));"undefined"!==typeof a.series.xaxis.tickFormatter&&(b=b.replace("%x",a.series.xaxis.tickFormatter(k,
a.series.xaxis).replace(/\$/g,"$$")));"undefined"!==typeof a.series.yaxis.tickFormatter&&(b=b.replace("%y",a.series.yaxis.tickFormatter(h,a.series.yaxis).replace(/\$/g,"$$")));return b};e.prototype.isTimeMode=function(b,a){return"undefined"!==typeof a.series[b].options.mode&&"time"===a.series[b].options.mode};e.prototype.isXDateFormat=function(b){return"undefined"!==typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat};e.prototype.isYDateFormat=function(b){return"undefined"!==
typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat};e.prototype.isCategoriesMode=function(b,a){return"undefined"!==typeof a.series[b].options.mode&&"categories"===a.series[b].options.mode};e.prototype.timestampToDate=function(b,a,e){b=d.plot.dateGenerator(b,e);return d.plot.formatDate(b,a,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)};e.prototype.adjustValPrecision=function(b,a,d){if(null!==a.match(b)&&""!==RegExp.$1){var e=RegExp.$1;d=d.toFixed(e);a=a.replace(b,
d)}return a};e.prototype.hasAxisLabel=function(b,a){return-1!==d.inArray("axisLabels",this.plotPlugins)&&"undefined"!==typeof a.series[b].options.axisLabel&&0<a.series[b].options.axisLabel.length};e.prototype.hasRotatedXAxisTicks=function(b){return-1!==d.inArray("tickRotor",this.plotPlugins)&&"undefined"!==typeof b.series.xaxis.rotatedTicks};d.plot.plugins.push({init:function(b){new e(b)},options:n,name:"tooltip",version:"0.8.5"})})(jQuery);